<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Shuttle & Team Allocator</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to right, #004D40, #E0F2F1);
            color: #263238;
        }

        header {
            text-align: center;
            padding: 30px;
            background-color: #00796B;
            color: #fff;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .tabs {
            display: flex;
            justify-content: center;
            background-color: #00796B;
            padding: 10px 0;
        }

        .tabs button {
            padding: 10px 25px;
            margin: 0 10px;
            border: none;
            background-color: #E0F2F1;
            color: #00796B;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .tabs button.active, .tabs button:hover {
            background-color: #00796B;
            color: #E0F2F1;
        }

        .content {
            max-width: 800px;
            margin: 30px auto;
            padding: 30px;
            background-color: #E0F2F1;
            border-radius: 12px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
        }

        textarea, select, button {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            font-size: 1rem;
            border-radius: 8px;
            border: 1px solid #00796B;
            box-sizing: border-box;
        }

        button {
            background-color: #00796B;
            color: #E0F2F1;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #004D40;
        }

        .box-result {
            background-color: #fff;
            padding: 15px;
            border: 1px solid #00796B;
            border-radius: 10px;
            white-space: pre-wrap;
            margin-bottom: 20px;
            min-height: 60px;
        }

        .team-name {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .joker {
            font-style: italic;
            color: #00796B;
            margin-top: 10px;
        }

        .toss-area {
            text-align: center;
            margin-top: 30px;
        }

        .result {
            font-weight: bold;
            margin-top: 10px;
        }

        .boxes {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }

        .box {
            cursor: pointer;
            font-size: 2rem;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #00796B;
            background-color: #E0F2F1;
            transition: all 0.3s ease;
            width: 80px;
            text-align: center;
        }

        .box:hover {
            background-color: #B2DFDB;
        }

        .play-again {
            margin-top: 20px;
            padding: 10px 25px;
            border-radius: 8px;
            background-color: #00796B;
            font-size: 1rem;
            color: #E0F2F1;
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <h1>Team Allocator</h1>
        <p>ALL THE BEST!! üëç</p>
    </header>

    <div class="tabs">
        <button id="shuttleTab" class="active" onclick="showTab('shuttle')">Shuttle</button>
        <button id="teamAllocatorTab" onclick="showTab('teamAllocator')">Cricket</button>
    </div>

    <!-- Shuttle Section -->
    <div id="shuttleContent" class="content">
        <h2>Shuttle Game Setup</h2>
        <textarea id="shuttlePlayerList" rows="5" placeholder="Enter player names, one per line"></textarea>
        <select id="shuttleTeamSize">
            <option value="1">1 vs 1</option>
            <option value="2">2 vs 2</option>
        </select>
        <button onclick="generateShuttleTeams()">Create Teams</button>
        <div>
            <div class="team-name">Teams:</div>
            <div id="shuttleTeamsResult" class="box-result"></div>
        </div>
        <div>
            <div class="team-name">Tournament Schedule:</div>
            <div id="shuttleScheduleResult" class="box-result"></div>
        </div>
    </div>

    <!-- Team Allocator Section -->
    <div id="teamAllocatorContent" class="content" style="display: none;">
        <h2>Team Allocator</h2>
        <textarea id="playerList" rows="5" placeholder="Enter player names, one per line"></textarea>
        <button onclick="allocateTeams()">Allocate Teams</button>
        <div class="team-name">Team A:</div>
        <div id="teamA" class="box-result"></div>
        <div class="team-name">Team B:</div>
        <div id="teamB" class="box-result"></div>
        <div id="joker" class="joker"></div>
        <div class="toss-area" id="tossArea" style="display:none;">
            <p id="chosenPlayerDisplay"></p>
            <button onclick="playTossGame()">Play Toss Game üé≤</button>
            <div class="result" id="tossResult"></div>
        </div>
        <div class="box-game" id="boxGame" style="display:none;">
            <p>Pick one of the boxes. One of them hides a ball üé±</p>
            <div class="boxes">
                <div class="box" onclick="chooseBox(0)" id="box0">üéÅ</div>
                <div class="box" onclick="chooseBox(1)" id="box1">üéÅ</div>
            </div>
            <div class="result" id="boxResult"></div>
            <button class="play-again" id="playAgainBtn" onclick="startBoxGame()">Play Again üîÅ</button>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            const tabs = ['shuttle', 'teamAllocator'];
            tabs.forEach(name => {
                document.getElementById(`${name}Content`).style.display = name === tabName ? 'block' : 'none';
                document.getElementById(`${name}Tab`).classList.toggle('active', name === tabName);
            });
        }

        function generateShuttleTeams() {
            const playersRaw = document.getElementById('shuttlePlayerList').value.trim();
            if (!playersRaw) return alert('Please enter player names.');

            const players = playersRaw.split('\n').map(p => p.trim()).filter(p => p);
            const teamSize = parseInt(document.getElementById('shuttleTeamSize').value);
            if (players.length < 2) return alert('At least two players needed.');

            for (let i = players.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [players[i], players[j]] = [players[j], players[i]];
            }

            const teams = [], teamNames = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
            for (let i = 0; i < players.length; i += teamSize)
                teams.push(players.slice(i, i + teamSize));

            let teamsOutput = teams.map((team, i) => `Team ${teamNames[i]} - ${team.join(', ')}`).join('\n');

            let schedule = [];
            for (let a = 0; a < teams.length; a++) {
                for (let b = a + 1; b < teams.length; b++) {
                    schedule.push(`Team ${teamNames[a]} vs Team ${teamNames[b]}`);
                }
            }

            for (let i = schedule.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [schedule[i], schedule[j]] = [schedule[j], schedule[i]];
            }

            document.getElementById('shuttleTeamsResult').textContent = teamsOutput;
            document.getElementById('shuttleScheduleResult').textContent = schedule.join('\n') || "No matches possible.";
        }

        function allocateTeams() {
            const playersRaw = document.getElementById('playerList').value.trim();
            if (!playersRaw) return alert('Please enter player names.');

            const players = playersRaw.split('\n').map(p => p.trim()).filter(p => p);
            if (players.length < 2) return alert('At least 2 players are needed.');

            for (let i = players.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [players[i], players[j]] = [players[j], players[i]];
            }

            let joker = null;
            if (players.length % 2 !== 0) joker = players.pop();

            const mid = players.length / 2;
            document.getElementById('teamA').textContent = players.slice(0, mid).join(', ');
            document.getElementById('teamB').textContent = players.slice(mid).join(', ');
            document.getElementById('joker').textContent = joker ? `Joker Player: ${joker}` : '';

            document.getElementById('tossArea').style.display = 'block';
            document.getElementById('boxGame').style.display = 'none';
            document.getElementById('playAgainBtn').style.display = 'none';
            document.getElementById('chosenPlayerDisplay').textContent = '';
        }

        let ballBoxIndex = -1, gameActive = false;

        function playTossGame() {
            const players = [...document.getElementById('teamA').textContent.split(', '),
                                             ...document.getElementById('teamB').textContent.split(', ')].filter(Boolean);
            if (!players.length) return;

            const chosen = players[Math.floor(Math.random() * players.length)];
            document.getElementById('chosenPlayerDisplay').textContent = `Player to toss: ${chosen}`;
            document.getElementById('boxGame').style.display = 'block';
            document.getElementById('boxResult').textContent = '';
            document.getElementById('tossResult').textContent = '';
            document.getElementById('playAgainBtn').style.display = 'none';

            for (let i = 0; i < 2; i++) {
                const box = document.getElementById(`box${i}`);
                box.textContent = 'üéÅ';
                box.style.pointerEvents = 'auto';
                box.style.backgroundColor = '#E0F2F1';
            }

            ballBoxIndex = Math.floor(Math.random() * 2);
            gameActive = true;
        }

        function chooseBox(selectedIndex) {
            if (!gameActive) return;
            gameActive = false;

            for (let i = 0; i < 2; i++) {
                const box = document.getElementById(`box${i}`);
                box.textContent = i === ballBoxIndex ? 'üé±' : '‚ùå';
                box.style.backgroundColor = i === ballBoxIndex ? 'lightgreen' : '#f8d7da';
                box.style.pointerEvents = 'none';
            }

            document.getElementById('boxResult').textContent =
                selectedIndex === ballBoxIndex ? 'Congratulations! You found the ball!' : 'Sorry, no ball here.';
            document.getElementById('tossResult').textContent =
                selectedIndex === ballBoxIndex ? 'You won the toss!' : 'You lost the toss.';
            document.getElementById('playAgainBtn').style.display = 'inline-block';
        }

        function startBoxGame() {
            playTossGame();
        }
    </script>
</body>
</html>
