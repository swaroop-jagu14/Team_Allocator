<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shuttle & Team Allocator</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #e0f2f1;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #00796B;
      color: white;
      text-align: center;
      padding: 20px;
    }
    .tabs {
      display: flex;
      justify-content: center;
      background-color: #004D40;
    }
    .tabs button {
      padding: 15px 30px;
      background: none;
      border: none;
      color: white;
      font-weight: bold;
      cursor: pointer;
      outline: none;
      transition: background 0.3s;
    }
    .tabs button.active,
    .tabs button:hover {
      background-color: #00695C;
    }
    .content {
      padding: 20px;
      display: none;
    }
    .content.active {
      display: block;
    }
    textarea, select, button {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      font-size: 1em;
    }
    .box-result {
      background-color: white;
      border: 2px solid #004D40;
      border-radius: 8px;
      padding: 15px;
      white-space: pre-wrap;
      margin-top: 10px;
    }
    .team-name {
      margin-top: 20px;
      font-weight: bold;
      color: #004D40;
    }
    .points-table {
      margin-top: 20px;
      border-collapse: collapse;
      width: 100%;
    }
    .points-table th, .points-table td {
      border: 1px solid #00796B;
      padding: 10px;
      text-align: center;
    }
    .points-table th {
      background-color: #004D40;
      color: white;
    }
    .match-result {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 10px 0;
    }
    .match-result select {
      width: auto;
      margin-left: 20px;
    }
    .generate-btn {
      background-color: #004D40;
      padding: 10px 20px;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <header>
    <h1>Team Allocator</h1>
    <p>ALL THE BEST!! üëç</p>
  </header>

  <div class="tabs">
    <button id="shuttleTab" class="active" onclick="showTab('shuttle')">Shuttle</button>
    <button id="teamAllocatorTab" onclick="showTab('teamAllocator')">Cricket</button>
  </div>

  <!-- Shuttle Section -->
  <div id="shuttleContent" class="content active">
    <h2>Shuttle Game Setup</h2>
    <textarea id="shuttlePlayerList" rows="5" placeholder="Enter player names, one per line"></textarea>
    <select id="shuttleTeamSize">
      <option value="1">1 vs 1</option>
      <option value="2">2 vs 2</option>
    </select>
    <button onclick="generateShuttleTeams()">Create Teams</button>

    <div class="team-name">Teams:</div>
    <div id="shuttleTeamsResult" class="box-result"></div>

    <div class="team-name">Tournament Schedule:</div>
    <div id="shuttleScheduleResult" class="box-result"></div>

    <div id="resultsSection" style="display:none;">
      <div class="team-name">Enter Match Results:</div>
      <div id="matchResults"></div>
      <button class="generate-btn" onclick="generatePointsTable()">Generate Points Table</button>
      <div id="pointsTable"></div>
    </div>
  </div>

  <!-- Cricket Team Allocator -->
  <div id="teamAllocatorContent" class="content">
    <h2>Cricket Team Allocator</h2>
    <textarea id="cricketPlayerList" rows="5" placeholder="Enter cricket player names, one per line"></textarea>
    <input type="number" id="numberOfCricketTeams" placeholder="Enter number of teams" min="2" />
    <button onclick="generateCricketTeams()">Create Teams</button>
    <div class="team-name">Teams:</div>
    <div id="cricketTeamsResult" class="box-result"></div>
  </div>

  <script>
    function showTab(tab) {
      document.getElementById('shuttleContent').classList.remove('active');
      document.getElementById('teamAllocatorContent').classList.remove('active');
      document.getElementById(tab + 'Content').classList.add('active');

      document.getElementById('shuttleTab').classList.remove('active');
      document.getElementById('teamAllocatorTab').classList.remove('active');
      document.getElementById(tab + 'Tab').classList.add('active');
    }

    let shuttleTeamMap = {};
    let shuttleSchedule = [];

    function generateShuttleTeams() {
      const playersRaw = document.getElementById('shuttlePlayerList').value.trim();
      if (!playersRaw) return alert('Please enter player names.');
      const players = playersRaw.split('\n').map(p => p.trim()).filter(p => p);
      const teamSize = parseInt(document.getElementById('shuttleTeamSize').value);
      if (players.length < 2) return alert('At least two players needed.');

      for (let i = players.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [players[i], players[j]] = [players[j], players[i]];
      }

      const teams = [], teamNames = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
      for (let i = 0; i < players.length; i += teamSize)
        teams.push(players.slice(i, i + teamSize));

      shuttleTeamMap = {};
      teams.forEach((team, i) => shuttleTeamMap[`Team ${teamNames[i]}`] = team);

      const teamsOutput = teams.map((team, i) => `Team ${teamNames[i]} - ${team.join(', ')}`).join('\n');

      let schedule = [];
      for (let a = 0; a < teams.length; a++) {
        for (let b = a + 1; b < teams.length; b++) {
          schedule.push([`Team ${teamNames[a]}`, `Team ${teamNames[b]}`]);
        }
      }

      for (let i = schedule.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [schedule[i], schedule[j]] = [schedule[j], schedule[i]];
      }

      document.getElementById('shuttleTeamsResult').textContent = teamsOutput;
      document.getElementById('shuttleScheduleResult').textContent = schedule.map(match => match.join(' vs ')).join('\n') || "No matches possible.";

      const matchResultsDiv = document.getElementById('matchResults');
      matchResultsDiv.innerHTML = '';
      schedule.forEach((match, idx) => {
        const div = document.createElement('div');
        div.className = 'match-result';
        const label = document.createElement('label');
        label.textContent = `${match[0]} vs ${match[1]}`;
        const select = document.createElement('select');
        select.id = `resultMatch${idx}`;
        select.innerHTML = `<option value="">--Select Winner--</option>
                            <option value="${match[0]}">${match[0]}</option>
                            <option value="${match[1]}">${match[1]}</option>`;
        div.appendChild(label);
        div.appendChild(select);
        matchResultsDiv.appendChild(div);
      });

      document.getElementById('resultsSection').style.display = schedule.length ? 'block' : 'none';
      shuttleSchedule = schedule;
    }

    function generatePointsTable() {
      if (!shuttleSchedule.length) return;

      const stats = {};
      Object.keys(shuttleTeamMap).forEach(team => {
        stats[team] = { played: 0, wins: 0, points: 0 };
      });

      shuttleSchedule.forEach((match, idx) => {
        const winner = document.getElementById(`resultMatch${idx}`).value;
        if (!winner) return;

        const [team1, team2] = match;
        stats[team1].played++;
        stats[team2].played++;

        stats[winner].wins++;
        stats[winner].points += 2;
      });

      const table = document.createElement('table');
      table.className = 'points-table';
      table.innerHTML = `
        <tr>
          <th>Team</th>
          <th>Matches Played</th>
          <th>Wins</th>
          <th>Points</th>
        </tr>
        ${Object.entries(stats).map(([team, data]) =>
          `<tr><td>${team}</td><td>${data.played}</td><td>${data.wins}</td><td>${data.points}</td></tr>`).join('')}
      `;
      document.getElementById('pointsTable').innerHTML = '';
      document.getElementById('pointsTable').appendChild(table);
    }

    function generateCricketTeams() {
      const playersRaw = document.getElementById('cricketPlayerList').value.trim();
      const numTeams = parseInt(document.getElementById('numberOfCricketTeams').value);
      if (!playersRaw || !numTeams || numTeams < 2) return alert('Enter valid player list and number of teams.');
      const players = playersRaw.split('\n').map(p => p.trim()).filter(p => p);
      if (players.length < numTeams) return alert('Not enough players for that many teams.');

      for (let i = players.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [players[i], players[j]] = [players[j], players[i]];
      }

      const teams = Array.from({ length: numTeams }, () => []);
      players.forEach((player, i) => teams[i % numTeams].push(player));

      const result = teams.map((team, i) => `Team ${i + 1} - ${team.join(', ')}`).join('\n\n');
      document.getElementById('cricketTeamsResult').textContent = result;
    }
  </script>
</body>
</html>
